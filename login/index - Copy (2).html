<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <script type="text/javascript">
        var ___TOKEN;

        function f_login() {
            const option = {
                url: '/login/check',
                method: 'POST', // *GET, POST, PUT, DELETE, etc.
                mode: 'cors', // no-cors, *cors, same-origin
                cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
                credentials: 'same-origin', // include, *same-origin, omit
                headers: {
                    'Content-Type': 'application/json'
                    // 'Content-Type': 'application/x-www-form-urlencoded',
                },
                redirect: 'follow', // manual, *follow, error
                referrer: 'no-referrer', // no-referrer, *client
                body: JSON.stringify({ username: 'admin', password: '12345' }) // body data type must match "Content-Type" header
            };

            return fetch(option.url, option).then(async res => {
                const j = await res.json();
                console.log('POST: ', option.url, j);
                ___TOKEN = j.message;
                return j;
            });
        }

        
        function f_post_test() {
            const option = {
                url: '/api/test',
                method: 'POST', // *GET, POST, PUT, DELETE, etc.
                mode: 'cors', // no-cors, *cors, same-origin
                cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
                credentials: 'same-origin', // include, *same-origin, omit
                headers: {
                    'token': ___TOKEN,
                    'Content-Type': 'application/json'
                    // 'Content-Type': 'application/x-www-form-urlencoded',
                },
                redirect: 'follow', // manual, *follow, error
                referrer: 'no-referrer', // no-referrer, *client
                body: JSON.stringify({ key1: '0123456789' }) // body data type must match "Content-Type" header
            };

            return fetch(option.url, option).then(async res => {
                const j = await res.json();
                console.log('POST_TEST: ', option.url, j); 
                return j;
            });
        }
    </script>
</head>
<body>
    <form action="/login/check" method="post">
        <input name="username" value="admin" type="text" placeholder="Username" /><br />
        <input name="password" value="12345" type="password" placeholder="Password" /><br />
        <input type="button" value="Login" onclick="f_login()" />
        <input type="button" value="POST_TEST" onclick="f_post_test()" />
    </form>
</body>
</html>